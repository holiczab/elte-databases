
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Creating Groups of Data - ELTE DATABASES I. AND II. CLASSES PRACTICE NOTES</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-groups-of-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ELTE DATABASES I. AND II. CLASSES PRACTICE NOTES" class="md-header__button md-logo" aria-label="ELTE DATABASES I. AND II. CLASSES PRACTICE NOTES" data-md-component="logo">
      
  <img src="../../assets/database.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ELTE DATABASES I. AND II. CLASSES PRACTICE NOTES
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creating Groups of Data
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../topics/" class="md-tabs__link">
          
  
  
  Practice Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../sql/01_Introduction/" class="md-tabs__link">
          
  
  
  SQL Basics

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../pl_sql/01_PL_SQL_basics/" class="md-tabs__link">
          
  
  
  PL/SQL Concepts

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../pl_sql_optimization/none/" class="md-tabs__link">
        
  
  
    
  
  PL/SQL Optimization

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../advanced_pl_sql/none/" class="md-tabs__link">
        
  
  
    
  
  Advanced PL/SQL

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ELTE DATABASES I. AND II. CLASSES PRACTICE NOTES" class="md-nav__button md-logo" aria-label="ELTE DATABASES I. AND II. CLASSES PRACTICE NOTES" data-md-component="logo">
      
  <img src="../../assets/database.png" alt="logo">

    </a>
    ELTE DATABASES I. AND II. CLASSES PRACTICE NOTES
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Practice Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Practice Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DB1 Practice Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../none/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DB2 Practice Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    SQL Basics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    SQL Basics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/01_Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/02_Basic_sql_statements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic SQL Statements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/03_Set_operator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Set Operators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/04_Data_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/05_Sql_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQL Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/06_Character_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Character Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/07_Number_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Number Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/08_Date_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Date Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/09_Conversion_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Conversion Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/10_Other_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Other Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/11_Conditional_expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Conditional Expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/12_Group_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Group Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/13_Group_by/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Group By
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/14_Joins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Joins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/15_Subqueries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Subqueries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/16_With/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    With
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/17_DML_DDL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DML and DDL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/18_Views/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Views
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/19_Relational_algebra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Relational Algebra
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    PL/SQL Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    PL/SQL Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pl_sql/01_PL_SQL_basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PL/SQL Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pl_sql/02_Cursors_and_collections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cursors and Collections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pl_sql/03_Exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pl_sql/04_Recurson/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Recursion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pl_sql_optimization/none/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PL/SQL Optimization
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_pl_sql/none/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced PL/SQL
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="creating-groups-of-data">Creating Groups of Data</h1>
<p><img alt="alt text" src="../../assets/P4/group.png" width="700" /></p>
<h1 id="creating-groups-of-data-group-by-clause-syntax">Creating Groups of Data: GROUP BY Clause Syntax</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">SELECT</span><span class="w">     </span><span class="k">column</span><span class="p">,</span><span class="w"> </span><span class="n">group_function</span><span class="p">(</span><span class="k">column</span><span class="p">)</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">FROM</span><span class="w">       </span><span class="k">table</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">[</span><span class="k">WHERE</span><span class="w">     </span><span class="n">condition</span><span class="p">]</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">[</span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w">  </span><span class="n">group_by_expression</span><span class="p">]</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">[</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w">  </span><span class="k">column</span><span class="p">];</span>
</span></code></pre></div>
<p>You can divide rows in a table into smaller groups by using the GROUP BY clause.</p>
<h1 id="using-the-group-by-clause">Using the GROUP BY Clause</h1>
<p>All columns in the SELECT list that are not in group functions must be in the GROUP BY clause.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>DEPARTMENT_ID</th>
<th>AVG(SALARY)</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>8600</td>
</tr>
<tr>
<td>30</td>
<td>4150</td>
</tr>
<tr>
<td>NULL</td>
<td>7000</td>
</tr>
<tr>
<td>90</td>
<td>19333.33333333333333</td>
</tr>
<tr>
<td>20</td>
<td>9500</td>
</tr>
<tr>
<td>70</td>
<td>10000</td>
</tr>
<tr>
<td>110</td>
<td>10150</td>
</tr>
<tr>
<td>50</td>
<td>3475.555555555555555</td>
</tr>
<tr>
<td>80</td>
<td>8955.882352941176470</td>
</tr>
<tr>
<td>40</td>
<td>6500</td>
</tr>
<tr>
<td>60</td>
<td>5760</td>
</tr>
<tr>
<td>10</td>
<td>4400</td>
</tr>
</tbody>
</table>
<h1 id="using-the-group-by-clause_1">Using the GROUP BY Clause</h1>
<p>The GROUP BY column does not have to be in the SELECT list.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>AVG(SALARY)</th>
</tr>
</thead>
<tbody>
<tr>
<td>8600</td>
</tr>
<tr>
<td>4150</td>
</tr>
<tr>
<td>7000</td>
</tr>
<tr>
<td>19333.33333333333333</td>
</tr>
<tr>
<td>9500</td>
</tr>
<tr>
<td>10000</td>
</tr>
<tr>
<td>10150</td>
</tr>
<tr>
<td>3475.555555555555555</td>
</tr>
<tr>
<td>8955.882352941176470</td>
</tr>
<tr>
<td>6500</td>
</tr>
<tr>
<td>5760</td>
</tr>
<tr>
<td>4400</td>
</tr>
</tbody>
</table>
<h1 id="grouping-by-more-than-one-column">Grouping by More Than One Column</h1>
<p><img alt="alt text" src="../../assets/P4/more.png" width="700" /></p>
<h1 id="using-the-group-by-clause-on-multiple-columns">Using the GROUP BY Clause on Multiple Columns</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="n">dept_id</span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>DEPT_ID</th>
<th>JOB_ID</th>
<th>SUM(SALARY)</th>
</tr>
</thead>
<tbody>
<tr>
<td>110</td>
<td>AC_ACCOUNT</td>
<td>8300</td>
</tr>
<tr>
<td>90</td>
<td>AD_VP</td>
<td>34000</td>
</tr>
<tr>
<td>50</td>
<td>ST_CLERK</td>
<td>55700</td>
</tr>
<tr>
<td>80</td>
<td>SA_REP</td>
<td>243500</td>
</tr>
<tr>
<td>50</td>
<td>ST_MAN</td>
<td>36400</td>
</tr>
<tr>
<td>80</td>
<td>SA_MAN</td>
<td>61000</td>
</tr>
<tr>
<td>110</td>
<td>AC_MGR</td>
<td>12000</td>
</tr>
<tr>
<td>90</td>
<td>AD_PRES</td>
<td>24000</td>
</tr>
<tr>
<td>60</td>
<td>IT_PROG</td>
<td>28800</td>
</tr>
<tr>
<td>100</td>
<td>FI_MGR</td>
<td>12000</td>
</tr>
<tr>
<td>30</td>
<td>PU_CLERK</td>
<td>13900</td>
</tr>
<tr>
<td>50</td>
<td>SH_CLERK</td>
<td>64300</td>
</tr>
<tr>
<td>20</td>
<td>MK_MAN</td>
<td>13000</td>
</tr>
<tr>
<td>100</td>
<td>FI_ACCOUNT</td>
<td>39600</td>
</tr>
<tr>
<td>NULL</td>
<td>SA_REP</td>
<td>7000</td>
</tr>
<tr>
<td>70</td>
<td>PR_REP</td>
<td>10000</td>
</tr>
<tr>
<td>30</td>
<td>PU_MAN</td>
<td>11000</td>
</tr>
<tr>
<td>10</td>
<td>AD_ASST</td>
<td>4400</td>
</tr>
<tr>
<td>20</td>
<td>MK_REP</td>
<td>6000</td>
</tr>
<tr>
<td>40</td>
<td>HR_REP</td>
<td>6500</td>
</tr>
</tbody>
</table>
<h1 id="illegal-queries-using-group-functions">Illegal Queries Using Group Functions</h1>
<p>Any column or expression in the SELECT list that is not an aggregate function <strong>must</strong> be in the GROUP BY clause:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">SELECT</span><span class="w">   </span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">FROM</span><span class="w">     </span><span class="n">employees</span><span class="p">;</span>
</span></code></pre></div>
<p><img alt="alt text" src="../../assets/P4/error1.png" width="700" /></p>
<p>Column missing in the GROUP BY clause</p>
<h1 id="illegal-queries-using-group-functions_1">Illegal Queries Using Group Functions</h1>
<ul>
<li>You cannot use the <strong>WHERE</strong> clause to restrict groups.</li>
<li>You use the <strong>HAVING</strong> clause to restrict groups.</li>
<li>You cannot use group functions in the <strong>WHERE</strong> clause.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">SELECT</span><span class="w">   </span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">FROM</span><span class="w">     </span><span class="n">employees</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">WHERE</span><span class="w">    </span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">8000</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="p">;</span>
</span></code></pre></div>
<p><img alt="alt text" src="../../assets/P4/error2.png" width="700" /></p>
<p>Cannot use the WHERE clause to restrict groups</p>
<h1 id="restricting-group-functions">Restricting Group Functions</h1>
<p><img alt="alt text" src="../../assets/P4/restriction.png" width="700" /></p>
<h1 id="restricting-group-results-with-the-having-clause">Restricting Group Results with the HAVING Clause</h1>
<ul>
<li>When you use the HAVING clause, the Oracle server restricts groups as follows:</li>
<li>Rows are grouped.</li>
<li>The group function is applied.</li>
<li>Groups matching the HAVING clause are displayed.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">SELECT</span><span class="w">     </span><span class="k">column</span><span class="p">,</span><span class="w"> </span><span class="n">group_function</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">FROM</span><span class="w">       </span><span class="k">table</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">[</span><span class="k">WHERE</span><span class="w">     </span><span class="n">condition</span><span class="p">]</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">[</span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w">  </span><span class="n">group_by_expression</span><span class="p">]</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="p">[</span><span class="k">HAVING</span><span class="w">    </span><span class="n">group_condition</span><span class="p">]</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="p">[</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w">  </span><span class="k">column</span><span class="p">];</span>
</span></code></pre></div>
<h1 id="using-the-having-clause">Using the HAVING Clause</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">HAVING</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">10000</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>DEPARTMENT_ID</th>
<th>MAX(SALARY)</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>12000</td>
</tr>
<tr>
<td>30</td>
<td>11000</td>
</tr>
<tr>
<td>90</td>
<td>24000</td>
</tr>
<tr>
<td>20</td>
<td>13000</td>
</tr>
<tr>
<td>110</td>
<td>12000</td>
</tr>
<tr>
<td>80</td>
<td>14000</td>
</tr>
</tbody>
</table>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">PAYROLL</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%REP%&#39;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">job_id</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="k">HAVING</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">13000</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">);</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>JOB_ID</th>
<th>PAYROLL</th>
</tr>
</thead>
<tbody>
<tr>
<td>PU_CLERK</td>
<td>13900</td>
</tr>
<tr>
<td>AD_PRES</td>
<td>24000</td>
</tr>
<tr>
<td>IT_PROG</td>
<td>28800</td>
</tr>
<tr>
<td>AD_VP</td>
<td>34000</td>
</tr>
<tr>
<td>ST_MAN</td>
<td>36400</td>
</tr>
<tr>
<td>FI_ACCOUNT</td>
<td>39600</td>
</tr>
<tr>
<td>ST_CLERK</td>
<td>55700</td>
</tr>
<tr>
<td>SA_MAN</td>
<td>61000</td>
</tr>
<tr>
<td>SH_CLERK</td>
<td>64300</td>
</tr>
</tbody>
</table>
<h1 id="nesting-group-functions">Nesting Group Functions</h1>
<ul>
<li>Display the maximum average salary:</li>
<li>Group functions can be nested to a depth of two.</li>
<li>The example displays the maximum average salary.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">))</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>MAX(AVG(SALARY))</th>
</tr>
</thead>
<tbody>
<tr>
<td>19333.33333333333333</td>
</tr>
</tbody>
</table>
<h1 id="obtaining-data-from-multiple-tables">Obtaining Data from Multiple Tables</h1>
<p><img alt="alt text" src="../../assets/P4/multiple.png" width="700" /></p>
<h1 id="types-of-joins">Types of Joins</h1>
<ul>
<li>Joins that are compliant with the SQL:1999 standard include the following:
    – Cross joins
    – Natural joins
    – USING clause
    – Full (or two-sided) outer joins
    – Arbitrary join conditions for outer joins</li>
</ul>
<h1 id="joining-tables-using-sql1999-syntax">Joining Tables Using SQL:1999 Syntax</h1>
<p>Use a join to query data from more than one table:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">table1</span><span class="p">.</span><span class="k">column</span><span class="p">,</span><span class="w"> </span><span class="n">table2</span><span class="p">.</span><span class="k">column</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">FROM</span><span class="w">   </span><span class="n">table1</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="p">[</span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">table2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">[</span><span class="k">JOIN</span><span class="w"> </span><span class="n">table2</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="k">column_name</span><span class="p">)]</span><span class="w"> </span><span class="o">|</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="p">[</span><span class="k">JOIN</span><span class="w"> </span><span class="n">table2</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">table1</span><span class="p">.</span><span class="k">column_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">table2</span><span class="p">.</span><span class="k">column_name</span><span class="p">)]</span><span class="w"> </span><span class="o">|</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="p">[</span><span class="k">LEFT</span><span class="o">|</span><span class="k">RIGHT</span><span class="o">|</span><span class="k">FULL</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">table2</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">table1</span><span class="p">.</span><span class="k">column_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">table2</span><span class="p">.</span><span class="k">column_name</span><span class="p">)]</span><span class="w"> </span><span class="o">|</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="p">[</span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">table2</span><span class="p">];</span>
</span></code></pre></div>
<h1 id="creating-natural-joins">Creating Natural Joins</h1>
<ul>
<li>The NATURAL JOIN clause is based on all columns in the two tables that have the same name.</li>
<li>It selects rows from the two tables that have equal values in all matched columns.</li>
<li>If the columns having the same names have different data types, an error is returned.</li>
</ul>
<h1 id="retrieving-records-with-natural-joins">Retrieving Records with Natural Joins</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="p">,</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">location_id</span><span class="p">,</span><span class="w"> </span><span class="n">city</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">locations</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>DEPARTMENT_ID</th>
<th>DEPARTMENT_NAME</th>
<th>LOCATION_ID</th>
<th>CITY</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>Administration</td>
<td>1700</td>
<td>Seattle</td>
</tr>
<tr>
<td>20</td>
<td>Marketing</td>
<td>1800</td>
<td>Toronto</td>
</tr>
<tr>
<td>30</td>
<td>Purchasing</td>
<td>1700</td>
<td>Seattle</td>
</tr>
<tr>
<td>40</td>
<td>Human Resources</td>
<td>2400</td>
<td>London</td>
</tr>
<tr>
<td>50</td>
<td>Shipping</td>
<td>1500</td>
<td>South San Francisco</td>
</tr>
<tr>
<td>60</td>
<td>IT</td>
<td>1400</td>
<td>Southlake</td>
</tr>
<tr>
<td>70</td>
<td>Public Relations</td>
<td>2700</td>
<td>Munich</td>
</tr>
<tr>
<td>80</td>
<td>Sales</td>
<td>2500</td>
<td>Oxford</td>
</tr>
<tr>
<td>90</td>
<td>Executive</td>
<td>1700</td>
<td>Seattle</td>
</tr>
<tr>
<td>100</td>
<td>Finance</td>
<td>1700</td>
<td>Seattle</td>
</tr>
<tr>
<td>110</td>
<td>Accounting</td>
<td>1700</td>
<td>Seattle</td>
</tr>
<tr>
<td>120</td>
<td>Treasury</td>
<td>1700</td>
<td>Seattle</td>
</tr>
</tbody>
</table>
<h1 id="creating-joins-with-the-using-clause">Creating Joins with the USING Clause</h1>
<ul>
<li>If several columns have the same names but the data types do not match, the NATURAL JOIN clause can be modified with the USING clause to specify the columns that should be used for an equijoin.</li>
<li>Use the USING clause to match only one column when more than one column matches.</li>
<li>Do not use a table name or alias in the referenced columns.</li>
<li>The NATURAL JOIN and USING clauses are mutually exclusive.</li>
</ul>
<h1 id="joining-column-names">Joining Column Names</h1>
<p><img alt="alt text" src="../../assets/P4/join.png" width="700" /></p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span><span class="p">.</span><span class="n">location_id</span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>EMPLOYEE_ID</th>
<th>LAST_NAME</th>
<th>LOCATION_ID</th>
<th>DEPARTMENT_ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>King</td>
<td>1700</td>
<td>90</td>
</tr>
<tr>
<td>101</td>
<td>Kochhar</td>
<td>1700</td>
<td>90</td>
</tr>
<tr>
<td>102</td>
<td>De Haan</td>
<td>1700</td>
<td>90</td>
</tr>
<tr>
<td>103</td>
<td>Hunold</td>
<td>1400</td>
<td>60</td>
</tr>
<tr>
<td>104</td>
<td>Ernst</td>
<td>1400</td>
<td>60</td>
</tr>
<tr>
<td>105</td>
<td>Austin</td>
<td>1400</td>
<td>60</td>
</tr>
<tr>
<td>106</td>
<td>Pataballa</td>
<td>1400</td>
<td>60</td>
</tr>
<tr>
<td>107</td>
<td>Lorentz</td>
<td>1400</td>
<td>60</td>
</tr>
<tr>
<td>108</td>
<td>Greenberg</td>
<td>1700</td>
<td>100</td>
</tr>
<tr>
<td>109</td>
<td>Faviet</td>
<td>1700</td>
<td>100</td>
</tr>
<tr>
<td>110</td>
<td>Chen</td>
<td>1700</td>
<td>100</td>
</tr>
</tbody>
</table>
<h1 id="qualifying-ambiguous">Qualifying Ambiguous</h1>
<h1 id="column-names">Column Names</h1>
<ul>
<li>Use table prefixes to qualify column names that are in multiple tables.</li>
<li>Use table prefixes to improve performance.</li>
<li>Use column aliases to distinguish columns that have identical names but reside in different tables.</li>
<li>Do not use aliases on columns that are identified in the USING clause and listed elsewhere in the SQL statement.</li>
</ul>
<h1 id="using-table-aliases">Using Table Aliases</h1>
<ul>
<li>Use table aliases to simplify queries.</li>
<li>Use table aliases to improve performance.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">       </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="k">USING</span><span class="w">  </span><span class="p">(</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<h1 id="creating-joins-with-the-on-clause">Creating Joins with the ON Clause</h1>
<ul>
<li>The join condition for the natural join is basically an equijoin of all columns with the same name.</li>
<li>Use the ON clause to specify arbitrary conditions or specify columns to join.</li>
<li>The join condition is separated from other search conditions.</li>
<li>The ON clause makes code easy to understand.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">);</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>EMPLOYEE_ID</th>
<th>LAST_NAME</th>
<th>DEPARTMENT_ID</th>
<th>DEPARTMENT_ID</th>
<th>LOCATION_ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>King</td>
<td>90</td>
<td>90</td>
<td>1700</td>
</tr>
<tr>
<td>101</td>
<td>Kochhar</td>
<td>90</td>
<td>90</td>
<td>1700</td>
</tr>
<tr>
<td>102</td>
<td>De Haan</td>
<td>90</td>
<td>90</td>
<td>1700</td>
</tr>
<tr>
<td>103</td>
<td>Hunold</td>
<td>60</td>
<td>60</td>
<td>1400</td>
</tr>
<tr>
<td>104</td>
<td>Ernst</td>
<td>60</td>
<td>60</td>
<td>1400</td>
</tr>
<tr>
<td>105</td>
<td>Austin</td>
<td>60</td>
<td>60</td>
<td>1400</td>
</tr>
<tr>
<td>106</td>
<td>Pataballa</td>
<td>60</td>
<td>60</td>
<td>1400</td>
</tr>
<tr>
<td>107</td>
<td>Lorentz</td>
<td>60</td>
<td>60</td>
<td>1400</td>
</tr>
<tr>
<td>108</td>
<td>Greenberg</td>
<td>100</td>
<td>100</td>
<td>1700</td>
</tr>
<tr>
<td>109</td>
<td>Faviet</td>
<td>100</td>
<td>100</td>
<td>1700</td>
</tr>
<tr>
<td>110</td>
<td>Chen</td>
<td>100</td>
<td>100</td>
<td>1700</td>
</tr>
<tr>
<td>111</td>
<td>Sciarra</td>
<td>100</td>
<td>100</td>
<td>1700</td>
</tr>
<tr>
<td>112</td>
<td>Urman</td>
<td>100</td>
<td>100</td>
<td>1700</td>
</tr>
<tr>
<td>113</td>
<td>Popp</td>
<td>100</td>
<td>100</td>
<td>1700</td>
</tr>
<tr>
<td>114</td>
<td>Raphaely</td>
<td>30</td>
<td>30</td>
<td>1700</td>
</tr>
</tbody>
</table>
<h1 id="self-joins-using-the-on-clause">Self-Joins Using the ON Clause</h1>
<p><img alt="alt text" src="../../assets/P4/self.png" width="700" /></p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="n">mgr</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">m</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">employee_id</span><span class="p">);</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>EMP</th>
<th>MGR</th>
</tr>
</thead>
<tbody>
<tr>
<td>Kochhar</td>
<td>King</td>
</tr>
<tr>
<td>De Haan</td>
<td>King</td>
</tr>
<tr>
<td>Raphaely</td>
<td>King</td>
</tr>
<tr>
<td>Weiss</td>
<td>King</td>
</tr>
<tr>
<td>Fripp</td>
<td>King</td>
</tr>
<tr>
<td>Kaufling</td>
<td>King</td>
</tr>
<tr>
<td>Vollman</td>
<td>King</td>
</tr>
<tr>
<td>Mourgos</td>
<td>King</td>
</tr>
<tr>
<td>Russell</td>
<td>King</td>
</tr>
<tr>
<td>Partners</td>
<td>King</td>
</tr>
<tr>
<td>Errazuriz</td>
<td>King</td>
</tr>
<tr>
<td>Cambrault</td>
<td>King</td>
</tr>
<tr>
<td>Zlotkey</td>
<td>King</td>
</tr>
</tbody>
</table>
<h1 id="applying-additional-conditions-to-a-join">Applying Additional Conditions to a Join</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">       </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="k">ON</span><span class="w">     </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="k">AND</span><span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">149</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>EMPLOYEE_ID</th>
<th>LAST_NAME</th>
<th>DEPARTMENT_ID</th>
<th>DEPARTMENT_ID</th>
<th>LOCATION_ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>174</td>
<td>Abel</td>
<td>80</td>
<td>80</td>
<td>2500</td>
</tr>
<tr>
<td>178</td>
<td>Taylor</td>
<td>80</td>
<td>80</td>
<td>2500</td>
</tr>
</tbody>
</table>
<p>Alternatively, you can use a WHERE clause to apply additional conditions:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">       </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="k">ON</span><span class="w">     </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="k">WHERE</span><span class="w">  </span><span class="n">e</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">149</span><span class="p">;</span>
</span></code></pre></div>
<h1 id="creating-three-way-joins-with-the-on-clause">Creating Three-Way Joins with the ON Clause</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">e</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">locations</span><span class="w"> </span><span class="n">l</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>EMPLOYEE_ID</th>
<th>CITY</th>
<th>DEPARTMENT_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>Seattle</td>
<td>Executive</td>
</tr>
<tr>
<td>101</td>
<td>Seattle</td>
<td>Executive</td>
</tr>
<tr>
<td>102</td>
<td>Seattle</td>
<td>Executive</td>
</tr>
<tr>
<td>103</td>
<td>Southlake</td>
<td>IT</td>
</tr>
<tr>
<td>104</td>
<td>Southlake</td>
<td>IT</td>
</tr>
<tr>
<td>105</td>
<td>Southlake</td>
<td>IT</td>
</tr>
<tr>
<td>106</td>
<td>Southlake</td>
<td>IT</td>
</tr>
<tr>
<td>107</td>
<td>Southlake</td>
<td>IT</td>
</tr>
<tr>
<td>108</td>
<td>Seattle</td>
<td>Finance</td>
</tr>
<tr>
<td>109</td>
<td>Seattle</td>
<td>Finance</td>
</tr>
<tr>
<td>110</td>
<td>Seattle</td>
<td>Finance</td>
</tr>
<tr>
<td>111</td>
<td>Seattle</td>
<td>Finance</td>
</tr>
<tr>
<td>112</td>
<td>Seattle</td>
<td>Finance</td>
</tr>
<tr>
<td>113</td>
<td>Seattle</td>
<td>Finance</td>
</tr>
</tbody>
</table>
<h1 id="non-equijoin">Non-Equijoin</h1>
<p><img alt="alt text" src="../../assets/P4/non.png" width="700" /></p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">grade_level</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">job_grades</span><span class="w"> </span><span class="n">j</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="k">BETWEEN</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">lowest_sal</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">highest_sal</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
<th>SALARY</th>
<th>GRADE_LEVEL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Olson</td>
<td>2100</td>
<td>A</td>
</tr>
<tr>
<td>Markle</td>
<td>2200</td>
<td>A</td>
</tr>
<tr>
<td>Philtanker</td>
<td>2200</td>
<td>A</td>
</tr>
<tr>
<td>Landry</td>
<td>2400</td>
<td>A</td>
</tr>
<tr>
<td>Gee</td>
<td>2400</td>
<td>A</td>
</tr>
<tr>
<td>Colmenares</td>
<td>2500</td>
<td>A</td>
</tr>
<tr>
<td>Marlow</td>
<td>2500</td>
<td>A</td>
</tr>
<tr>
<td>Patel</td>
<td>2500</td>
<td>A</td>
</tr>
<tr>
<td>Vargas</td>
<td>2500</td>
<td>A</td>
</tr>
<tr>
<td>Sullivan</td>
<td>2500</td>
<td>A</td>
</tr>
<tr>
<td>Perkins</td>
<td>2500</td>
<td>A</td>
</tr>
<tr>
<td>Himuro</td>
<td>2600</td>
<td>A</td>
</tr>
</tbody>
</table>
<h1 id="outer-joins">Outer Joins</h1>
<p><img alt="alt text" src="../../assets/P4/outer.png" width="700" /></p>
<h1 id="inner-versus-outer-joins">INNER Versus OUTER Joins</h1>
<ul>
<li>In SQL:1999, the join of two tables returning only matched rows is called an <strong>inner join</strong>.</li>
<li>A join between two tables that returns the results of the inner join as well as the <strong>unmatched rows</strong> from the left (or right) tables is called a <strong>left (or right) outer join</strong>.</li>
<li>A join between two tables that returns the results of an inner join as well as the results of a left and right join is a <strong>full outer join</strong>.</li>
</ul>
<h1 id="left-outer-join">LEFT OUTER JOIN</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
<th>DEPARTMENT_ID</th>
<th>DEPARTMENT_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>Whalen</td>
<td>10</td>
<td>Administration</td>
</tr>
<tr>
<td>Hartstein</td>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>Fay</td>
<td>20</td>
<td>Marketing</td>
</tr>
<tr>
<td>Raphaely</td>
<td>30</td>
<td>Purchasing</td>
</tr>
<tr>
<td>Khoo</td>
<td>30</td>
<td>Purchasing</td>
</tr>
<tr>
<td>Baida</td>
<td>30</td>
<td>Purchasing</td>
</tr>
<tr>
<td>Tobias</td>
<td>30</td>
<td>Purchasing</td>
</tr>
<tr>
<td>Himuro</td>
<td>30</td>
<td>Purchasing</td>
</tr>
<tr>
<td>Colmenares</td>
<td>30</td>
<td>Purchasing</td>
</tr>
<tr>
<td>Mavris</td>
<td>40</td>
<td>Human Resources</td>
</tr>
<tr>
<td>Weiss</td>
<td>50</td>
<td>Shipping</td>
</tr>
<tr>
<td>Fripp</td>
<td>50</td>
<td>Shipping</td>
</tr>
<tr>
<td>Kaufling</td>
<td>50</td>
<td>Shipping</td>
</tr>
</tbody>
</table>
<h1 id="right-outer-join">RIGHT OUTER JOIN</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
<th>DEPARTMENT_ID</th>
<th>DEPARTMENT_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>King</td>
<td>90</td>
<td>Executive</td>
</tr>
<tr>
<td>Kochhar</td>
<td>90</td>
<td>Executive</td>
</tr>
<tr>
<td>De Haan</td>
<td>90</td>
<td>Executive</td>
</tr>
<tr>
<td>Hunold</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Ernst</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Austin</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Pataballa</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Lorentz</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Greenberg</td>
<td>100</td>
<td>Finance</td>
</tr>
<tr>
<td>Faviet</td>
<td>100</td>
<td>Finance</td>
</tr>
</tbody>
</table>
<h1 id="full-outer-join">FULL OUTER JOIN</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">FULL</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">ON</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
<th>DEPARTMENT_ID</th>
<th>DEPARTMENT_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>King</td>
<td>90</td>
<td>Executive</td>
</tr>
<tr>
<td>Kochhar</td>
<td>90</td>
<td>Executive</td>
</tr>
<tr>
<td>De Haan</td>
<td>90</td>
<td>Executive</td>
</tr>
<tr>
<td>Hunold</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Ernst</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Austin</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Pataballa</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Lorentz</td>
<td>60</td>
<td>IT</td>
</tr>
<tr>
<td>Greenberg</td>
<td>100</td>
<td>Finance</td>
</tr>
<tr>
<td>Faviet</td>
<td>100</td>
<td>Finance</td>
</tr>
<tr>
<td>Chen</td>
<td>100</td>
<td>Finance</td>
</tr>
<tr>
<td>Sciarra</td>
<td>100</td>
<td>Finance</td>
</tr>
</tbody>
</table>
<h1 id="cartesian-products">Cartesian Products</h1>
<ul>
<li>
<p>A Cartesian product is formed when:</p>
</li>
<li>
<p>A join condition is omitted</p>
</li>
<li>A join condition is invalid</li>
<li>
<p>All rows in the first table are joined to all rows in the second table</p>
</li>
<li>
<p>To avoid a Cartesian product, always include a valid join condition.</p>
</li>
</ul>
<h1 id="generating-a-cartesian-product">Generating a Cartesian Product</h1>
<p><img alt="alt text" src="../../assets/P4/cartesian.png" width="700" /></p>
<h1 id="creating-cross-joins">Creating Cross Joins</h1>
<ul>
<li>The CROSS JOIN clause produces the crossproduct of two tables.</li>
<li>This is also called a Cartesian product between the two tables.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">departments</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
<th>DEPARTMENT_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>King</td>
<td>Administration</td>
</tr>
<tr>
<td>Kochhar</td>
<td>Administration</td>
</tr>
<tr>
<td>De Haan</td>
<td>Administration</td>
</tr>
<tr>
<td>Hunold</td>
<td>Administration</td>
</tr>
<tr>
<td>Ernst</td>
<td>Administration</td>
</tr>
<tr>
<td>Austin</td>
<td>Administration</td>
</tr>
<tr>
<td>Pataballa</td>
<td>Administration</td>
</tr>
<tr>
<td>Lorentz</td>
<td>Administration</td>
</tr>
<tr>
<td>Greenberg</td>
<td>Administration</td>
</tr>
<tr>
<td>Faviet</td>
<td>Administration</td>
</tr>
<tr>
<td>Chen</td>
<td>Administration</td>
</tr>
<tr>
<td>Sciarra</td>
<td>Administration</td>
</tr>
</tbody>
</table>
<h1 id="using-a-subquery-to-solve-a-problem">Using a Subquery to Solve a Problem</h1>
<p><img alt="alt text" src="../../assets/P4/sub.png" width="700" /></p>
<h1 id="subquery-syntax">Subquery Syntax</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">SELECT</span><span class="w">  </span><span class="n">select_list</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="k">FROM</span><span class="w">    </span><span class="k">table</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="k">WHERE</span><span class="w">   </span><span class="n">expr</span><span class="w"> </span><span class="k">operator</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">        </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">select_list</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">         </span><span class="k">FROM</span><span class="w">   </span><span class="k">table</span><span class="p">);</span>
</span></code></pre></div>
<ul>
<li>The subquery (inner query) executes once before the main query (outer query).</li>
<li>The result of the subquery is used by the main query.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Abel&#39;</span><span class="p">);</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>King</td>
</tr>
<tr>
<td>Kochhar</td>
</tr>
<tr>
<td>De Haan</td>
</tr>
<tr>
<td>Greenberg</td>
</tr>
<tr>
<td>Russell</td>
</tr>
<tr>
<td>Partners</td>
</tr>
<tr>
<td>Errazuriz</td>
</tr>
<tr>
<td>Ozer</td>
</tr>
<tr>
<td>Hartstein</td>
</tr>
<tr>
<td>Higgins</td>
</tr>
</tbody>
</table>
<h1 id="guidelines-for-using-subqueries">Guidelines for Using Subqueries</h1>
<ul>
<li>Enclose subqueries in parentheses.</li>
<li>Place subqueries on the right side of the comparison condition.</li>
<li>The ORDER BY clause in the subquery is not needed unless you are performing Top-N analysis.</li>
<li>Use single-row operators with single-row subqueries, and use multiple-row operators with multiple-row subqueries.</li>
</ul>
<h1 id="types-of-subqueries">Types of Subqueries</h1>
<p><img alt="alt text" src="../../assets/P4/typessub.png" width="700" /></p>
<h1 id="single-row-subqueries">Single-Row Subqueries</h1>
<ul>
<li>Return <strong>only one row</strong></li>
<li>Use single-row comparison operators</li>
</ul>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>Equal to</td>
</tr>
<tr>
<td>&gt;</td>
<td>Greater than</td>
</tr>
<tr>
<td>&gt;=</td>
<td>Greater than or equal to</td>
</tr>
<tr>
<td>&lt;</td>
<td>Less than</td>
</tr>
<tr>
<td>&lt;=</td>
<td>Less than or equal to</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>Not equal to</td>
</tr>
</tbody>
</table>
<h1 id="executing-single-row-subqueries">Executing Single-Row Subqueries</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">job_id</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">141</span><span class="p">)</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="k">AND</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">143</span><span class="p">);</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
<th>JOB_ID</th>
<th>SALARY</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nayer</td>
<td>ST_CLERK</td>
<td>3200</td>
</tr>
<tr>
<td>Mikkilineni</td>
<td>ST_CLERK</td>
<td>2700</td>
</tr>
<tr>
<td>Bissot</td>
<td>ST_CLERK</td>
<td>3300</td>
</tr>
<tr>
<td>Atkinson</td>
<td>ST_CLERK</td>
<td>2800</td>
</tr>
<tr>
<td>Mallin</td>
<td>ST_CLERK</td>
<td>3300</td>
</tr>
<tr>
<td>Rogers</td>
<td>ST_CLERK</td>
<td>2900</td>
</tr>
<tr>
<td>Ladwig</td>
<td>ST_CLERK</td>
<td>3600</td>
</tr>
<tr>
<td>Stiles</td>
<td>ST_CLERK</td>
<td>3200</td>
</tr>
<tr>
<td>Seo</td>
<td>ST_CLERK</td>
<td>2700</td>
</tr>
</tbody>
</table>
<h1 id="using-group-functions-in-a-subquery">Using Group Functions in a Subquery</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span><span class="p">);</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>LAST_NAME</th>
<th>JOB_ID</th>
<th>SALARY</th>
</tr>
</thead>
<tbody>
<tr>
<td>Olson</td>
<td>ST_CLERK</td>
<td>2100</td>
</tr>
</tbody>
</table>
<h1 id="the-having-clause-with-subqueries">The HAVING Clause with Subqueries</h1>
<ul>
<li>The Oracle server executes subqueries first.</li>
<li>The Oracle server returns results into the HAVING clause of the main query.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">SELECT</span><span class="w">   </span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="k">FROM</span><span class="w">     </span><span class="n">employees</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="k">HAVING</span><span class="w">   </span><span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">         </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">          </span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">          </span><span class="k">WHERE</span><span class="w">  </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">);</span>
</span></code></pre></div>
<h1 id="what-is-wrong-with-this-statement">What Is Wrong with This Statement?</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="k">WHERE</span><span class="w">  </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">       </span><span class="p">(</span><span class="k">SELECT</span><span class="w">   </span><span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">        </span><span class="k">FROM</span><span class="w">     </span><span class="n">employees</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">        </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="p">);</span>
</span></code></pre></div>
<p><img alt="alt text" src="../../assets/P4/error3.png" width="700" /></p>
<p>Single-row operator with multiple-row subquery</p>
<h1 id="will-this-statement-return-rows">Will This Statement Return Rows?</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="k">WHERE</span><span class="w">  </span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">       </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">job_id</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">        </span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">        </span><span class="k">WHERE</span><span class="w">  </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Haas&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p><img alt="alt text" src="../../assets/P4/error4.png" width="700" /></p>
<p>Subquery returns no values.</p>
<h1 id="multiple-row-subqueries">Multiple-Row Subqueries</h1>
<ul>
<li>Return <strong>more than one row</strong></li>
<li>Use multiple-row comparison operators</li>
</ul>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>IN</td>
<td>Equal to any member in the list</td>
</tr>
<tr>
<td>ANY</td>
<td>Compare value to each value returned by the subquery</td>
</tr>
<tr>
<td>ALL</td>
<td>Compare value to every value returned by the subquery</td>
</tr>
</tbody>
</table>
<h1 id="using-the-any-operator-in-multiple-row-subqueries">Using the ANY Operator in Multiple-Row Subqueries</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">ANY</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">)</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="k">AND</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>EMPLOYEE_ID</th>
<th>LAST_NAME</th>
<th>JOB_ID</th>
<th>SALARY</th>
</tr>
</thead>
<tbody>
<tr>
<td>132</td>
<td>Olson</td>
<td>ST_CLERK</td>
<td>2100</td>
</tr>
<tr>
<td>136</td>
<td>Philtanker</td>
<td>ST_CLERK</td>
<td>2200</td>
</tr>
<tr>
<td>128</td>
<td>Markle</td>
<td>ST_CLERK</td>
<td>2200</td>
</tr>
<tr>
<td>135</td>
<td>Gee</td>
<td>ST_CLERK</td>
<td>2400</td>
</tr>
<tr>
<td>127</td>
<td>Landry</td>
<td>ST_CLERK</td>
<td>2400</td>
</tr>
<tr>
<td>191</td>
<td>Perkins</td>
<td>SH_CLERK</td>
<td>2500</td>
</tr>
<tr>
<td>182</td>
<td>Sullivan</td>
<td>SH_CLERK</td>
<td>2500</td>
</tr>
<tr>
<td>144</td>
<td>Vargas</td>
<td>ST_CLERK</td>
<td>2500</td>
</tr>
<tr>
<td>140</td>
<td>Patel</td>
<td>ST_CLERK</td>
<td>2500</td>
</tr>
</tbody>
</table>
<h1 id="using-the-all-operator-in-multiple-row-subqueries">Using the ALL Operator in Multiple-Row Subqueries</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">ALL</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">salary</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="k">FROM</span><span class="w"> </span><span class="n">nikovits</span><span class="p">.</span><span class="n">employees</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">)</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="k">AND</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>EMPLOYEE_ID</th>
<th>LAST_NAME</th>
<th>JOB_ID</th>
<th>SALARY</th>
</tr>
</thead>
<tbody>
<tr>
<td>185</td>
<td>Bull</td>
<td>SH_CLERK</td>
<td>4100</td>
</tr>
<tr>
<td>192</td>
<td>Bell</td>
<td>SH_CLERK</td>
<td>4000</td>
</tr>
<tr>
<td>193</td>
<td>Everett</td>
<td>SH_CLERK</td>
<td>3900</td>
</tr>
<tr>
<td>188</td>
<td>Chung</td>
<td>SH_CLERK</td>
<td>3800</td>
</tr>
<tr>
<td>137</td>
<td>Ladwig</td>
<td>ST_CLERK</td>
<td>3600</td>
</tr>
<tr>
<td>189</td>
<td>Dilly</td>
<td>SH_CLERK</td>
<td>3600</td>
</tr>
<tr>
<td>141</td>
<td>Rajs</td>
<td>ST_CLERK</td>
<td>3500</td>
</tr>
<tr>
<td>186</td>
<td>Dellinger</td>
<td>SH_CLERK</td>
<td>3400</td>
</tr>
<tr>
<td>133</td>
<td>Mallin</td>
<td>ST_CLERK</td>
<td>3300</td>
</tr>
<tr>
<td>129</td>
<td>Bissot</td>
<td>ST_CLERK</td>
<td>3300</td>
</tr>
<tr>
<td>180</td>
<td>Taylor</td>
<td>SH_CLERK</td>
<td>3200</td>
</tr>
<tr>
<td>138</td>
<td>Stiles</td>
<td>ST_CLERK</td>
<td>3200</td>
</tr>
</tbody>
</table>
<h1 id="null-values-in-a-subquery">Null Values in a Subquery</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="k">SELECT</span><span class="w">  </span><span class="n">emp</span><span class="p">.</span><span class="n">last_name</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="k">FROM</span><span class="w">    </span><span class="n">employees</span><span class="w"> </span><span class="n">emp</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="k">WHERE</span><span class="w">   </span><span class="n">emp</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">IN</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">        </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">manager_id</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">         </span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">mgr</span><span class="p">);</span>
</span></code></pre></div>
<p>no rows selected</p>
<p>x NOT IN (A, B, NULL) → Unknown</p>
<h1 id="joins-summary">Joins Summary</h1>
<p><img alt="alt text" src="../../assets/P4/joinsummary.png" width="700" /></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> Holicza Barnabás & ELTE
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>